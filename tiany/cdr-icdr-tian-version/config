# V1.0, 20241102
# This is the only file that needs user's customization 
# 
# Algorithm outline: there are four types of data: 
# raw:      downloaded GFS grib2 files. Satellite .SV files in big-endian before swapped. 
# input:    .bin files extracted from GFS grib. Satellite .SV files swappped. 
# params:   static data, e.g., calibration paparameters, meta data, etc. 
# output:   .nc files containing calibrated data. 

# Convention: 
# 1. only raw data locations are specified by the user
# 2. input, and output data locations are under "input/" and "output/" of 
#    the $top_dir 

#============== Start of User Configuration ===========================
#---------------------------------------------------------------------
# Where everything except raw data is located under: 
top_dir=/data1/tiany/cdr-icdr-tian-version/

#---------------------------------------------------------------------
# Time range. yyyymmdd
start_day=20240801
end_day=20240831

#---------------------------------------------------------------------
# Satellites to process: separated by spaces. allowed values are: 
# noaa-18, noaa-19, metop-a. 
# Example: 
# sats="noaa-18, noaa-19, metop-a" # metop-a has not been tested
sats="noaa-18 noaa-19" 

#---------------------------------------------------------------------
# GFS raw data location
# GFS raw file example: 
# /data2/cdr/cdr-example-data/gfs/20240830/gfs_3_20240830_1200_000.grb2

gfs_raw_dir=/data2/cdr/cdr-example-data/gfs/

# Processed GFS data will be located at ./input/proc_avn/, for example:  
# ./input/proc_avn/20240830/avn_ts2m15.bin

#---------------------------------------------------------------------
# Top level dir of satallite raw data: 
# Example file: 
# /data2/cdr/unswapped/amsua/aug2024/NSS.AMAX.NN.D24232.S1718.E1909.B9922425.SV
# /data2/cdr/unswapped/mhs/aug2024/NSS.MHSX.NP.D24244.S0200.E0352.B8022122.SV

sat_raw_dir=/data2/cdr/unswapped/

#---------------------------------------------------------------------
# Swapped 1b data location: 
# $top_dir/input/swapped/$sensor/$sat/$yyyymmdd/
# Example file:
# ./input/swapped/amsua/noaa-18/20240830/NSS.AMAX.NN.D24232.S1718.E1909.B9922425.SV

#---------------------------------------------------------------------
# Where wgrib2 is located

grib_dir=/usr/bin/

#============== End of User Configuration ============================

export PATH=$PATH:$grib_dir
tmpdir=$top_dir/tmp/

declare -A sat_fname 
declare -A sensor_fname 
declare -A struct_fname # for swap code

sat_fname["metop-a"]="NK"   # need to check 
sat_fname["noaa-18"]="NN"
sat_fname["noaa-19"]="NP"

sensor_fname["amsua"]="AMAX"
sensor_fname["mhs"]="MHSX"

struct_fname["amsua"]=$top_dir/code/swap_endian/Structure_AMSUA_1b
struct_fname["mhs"]=$top_dir/code/swap_endian/Structure_MHS_1b

